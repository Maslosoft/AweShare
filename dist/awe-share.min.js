(function(){var a,b,c=function(a,b){return function(){return a.apply(b,arguments)}},d=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},e={}.hasOwnProperty;this.Maslosoft||(this.Maslosoft={}),this.Maslosoft.AweShare=function(){function a(b,d){var e,f,g,h,i,j,k,l,m,n,o;if(null==d&&(d=null),this.share=c(this.share,this),this.adapters={},this.windows={},this.element={},a.idCounter++,this.element=jQuery(b),this.element.attr("id")||this.element.attr("id","maslosoft-awe-share-"+a.idCounter),null===d&&(d=this.element.data()),j=new Maslosoft.AweShare.Meta,"string"==typeof d.services&&(d.services=d.services.replace(/\s*/g,"").split(",")),void 0===d.services&&(d.services=[]),d.url||(d.url=""),d.title||(d.title=document.title),d.description||(d.description=j.getName("description")),d.tags||(d.tags=j.getName("keywords")),d.tags)for(d.tags=d.tags.split(","),n=g=0,i=tags.length;g<i;n=++g)h=tags[n],console.log(h,n);if(d.image||(d.image=j.getProperty("og:image")),void 0===d.counter&&(d.counter=!0),void 0===d.counterEmpty&&(d.counterEmpty=""),void 0===d.tip&&(d.tip=!1),!d.services.length){l=Maslosoft.AweShare.Adapters;for(k in l)e=l[k],d.services.push(this.decamelize(k))}this.adapters={},m=d.services;for(h in m)k=m[h],f=this.camelize(k),"function"==typeof Maslosoft.AweShare.Adapters[f]?(e=new Maslosoft.AweShare.Adapters[f],e.setUrl(d.url),e.setData&&e.setData(d),o=new Maslosoft.AweShare.Window(d),this.adapters[k]=e,this.windows[k]=o):(console.warn("No adapter for "+k+" in ",b,(new Error).stack),d.services.splice(h,1));0===this.adapters.length&&console.warn("No adapters selected for ",b,(new Error).stack),this.element.on("click","a",this.share),new Maslosoft.AweShare.Renderer(this,d,this.adapters)}return a.idCounter=0,a.prototype.element="",a.prototype.adapters={},a.prototype.windows={},a.prototype.share=function(a){var b,c,d,e,f;return d=jQuery(a.currentTarget).data(),e=d.service,b=this.adapters[e],f=this.windows[e],c=!1,b.url||(b.url=document.location,c=!0),b.decorate(f),f.open(),c&&(b.url=""),a.preventDefault()},a.prototype.decamelize=function(a,b){return null==b&&(b="-"),a.replace(/([a-z\d])([A-Z])/g,"$1"+b+"$2").replace(new RegExp("("+b+"[A-Z])([A-Z])","g"),"$1"+b+"$2").toLowerCase()},a.prototype.camelize=function(a){return a.replace(/(?:^|[-_])(\w)/g,function(a,b){return b?b.toUpperCase():""})},a.init=function(){return jQuery(".awe-share").each(function(a,b){return new window.Maslosoft.AweShare(b)})},a}(),this.Maslosoft.AweShare.Adapters={},this.Maslosoft.AweShare.Adapter=function(){function a(){}return a.prototype.id=null,a.prototype.url="",a.prototype.image="",a.prototype.data=null,a.prototype.count=function(a){return a(0)},a.prototype.decorate=function(a){return a.url="#not implemented"},a.prototype.setId=function(a){this.id=a},a.prototype.getId=function(){return this.id},a.prototype.setImage=function(a){this.image=a},a.prototype.setData=function(a){this.data=a},a.prototype.setUrl=function(a){return a=a.toString(),a.indexOf("#")?this.url=a.split("#")[0]:this.url=a},a}(),b={},a={},this.Maslosoft.AweShare.Counter=function(){function d(a,b,d){this.name=a,this.setCount=c(this.setCount,this),this.count=c(this.count,this),this.adapter={},this.callback={},this.adapter=b,this.callback=d}return d.prototype.adapter={},d.prototype.name="",d.prototype.callback={},d.prototype.count=function(){return b[this.name]&&"number"==typeof b[this.name][this.adapter.url]?this.callback(this.name,b[this.name][this.adapter.url]):(b[this.name]||(b[this.name]={}),a[this.name]||(a[this.name]={}),a[this.name][this.adapter.url]?a[this.name][this.adapter.url].push(this.callback):(this.adapter.count(this.setCount),a[this.name][this.adapter.url]=[]))},d.prototype.setCount=function(c){var d,e,f,g,h;if(b[this.name][this.adapter.url]=parseInt(c),this.callback(this.name,parseInt(c)),a[this.name]&&a[this.name][this.adapter.url]){for(g=a[this.name][this.adapter.url],h=[],e=0,f=g.length;e<f;e++)d=g[e],h.push(d(this.name,parseInt(c)));return h}},d}(),this.Maslosoft.AweShare.Meta=function(){function a(){}return a.prototype.getName=function(a){return this.get("name",a)},a.prototype.getProperty=function(a){return this.get("property",a)},a.prototype.get=function(a,b){var c,d,e,f,g;for(g=document.getElementsByTagName("meta"),d=0,e=g.length;d<e;d++)if(f=g[d],c=null,f&&(c=f.getAttribute(a)),c&&c.toLowerCase()===b.toLowerCase())return f.getAttribute("content");return""},a}(),this.Maslosoft.AweShare.Renderer=function(){function a(a,b,d){this.setCounter=c(this.setCounter,this),this.onScroll=c(this.onScroll,this);var e,f,g,h,i;this.sharer={},this.adapters={},this.data={},this.sharer=a,this.data=b,this.adapters=d,this.empty=this.data.counterEmpty,this.window=jQuery(window),this.sharer.element.html(""),"number"==typeof this.data.pin&&(this.data.pinTop=this.data.pin),void 0===this.data.pinScroll&&(this.data.pinScroll=this.data.pinTop),this.data.pinTop&&(this.sharer.element.addClass("awe-share-pin"),this.data.pinPosition&&"left"!==this.data.pinPosition||this.sharer.element.addClass("awe-share-pin-left"),"right"===this.data.pinPosition&&this.sharer.element.addClass("awe-share-pin-right"),this.onScroll(),this.data.pinScroll!==this.data.pinTop&&jQuery(window).scroll(this.onScroll)),this.data.tip&&"function"==typeof jQuery.fn.tooltip&&(h="top",this.sharer.element.hasClass("awe-share-pin-left")&&(h="right"),this.sharer.element.hasClass("awe-share-pin-right")&&(h="left"),"string"==typeof this.data.tip&&(h=this.data.tip),f=this.sharer.element.attr("id")," a",jQuery("#"+f).tooltip({selector:"a",placement:h})),i=this.adapters;for(g in i)e=i[g],this.render(g,e)}return a.prototype.sharer={},a.prototype.data={},a.prototype.adapters={},a.prototype.empty="",a.prototype.window=null,a.prototype.onScroll=function(){var a;a=this.window.scrollTop(),a+this.data.pinScroll<this.data.pinTop?this.sharer.element.css({top:this.data.pinTop-a}):this.sharer.element.css({top:this.data.pinScroll})},a.prototype.render=function(a,b){var c,d,e,f,g;if(g=this.sharer.windows[a],c=this.sharer.camelize(a),e=Maslosoft.AweShare.Adapters[c].label,f=jQuery('<a href="'+g.url+'" data-service="'+a+'" class="awe-share-brand-'+a+'" title="'+e+"\">\n\t<i class='fa fa-2x fa-"+a+"'></i>\n</a>"),this.sharer.element.append(f),this.data.counter)return f.append('<span class="awe-share-counter">'+this.empty+"</span>"),d=new Maslosoft.AweShare.Counter(a,b,this.setCounter),d.count()},a.prototype.humanize=function(a){var b,c,d;if(a=parseInt(a),b=1e3,Math.abs(a)<b)return a;for(d=["k","m","g"],c=-1;;)if(a/=b,++c,!(Math.abs(a)>=b&&c<d.length-1))break;return a.toFixed()+d[c]},a.prototype.setCounter=function(a,b){return b=this.humanize(b),0===b&&(b=this.empty),this.sharer.element.find("a[data-service="+a+"]").find(".awe-share-counter").html(b)},a}(),this.Maslosoft.AweShare.Window=function(){function a(a){this.open=c(this.open,this),this.title=a.title,this.description=a.description}return a.prototype.name="maslosoft-awe-share",a.prototype.menubar=0,a.prototype.resizable=1,a.prototype.scrollbars=0,a.prototype.status=0,a.prototype.toolbar=0,a.prototype.top="",a.prototype.left="",a.prototype.width="",a.prototype.height="",a.prototype.url="",a.prototype.title="",a.prototype.description="",a.prototype.open=function(){var a,b,c,d,e,f,g,h;for(h=screen.width||window.outerWidth,a=screen.height||window.outerHeight,""===this.width&&(this.width=Math.ceil(h/2)),this.width=Math.min(this.width,h),""===this.height&&(this.height=Math.ceil(a/2)),this.height=Math.min(this.height,a),""===this.top&&(this.top=Math.ceil(a/2)-Math.ceil(this.height/2)),""===this.left&&(this.left=Math.ceil(h/2)-Math.ceil(this.width/2)),f=[],e=["menubar","resizable","scrollbars","status","toolbar","top","left","width","height"],b=0,c=e.length;b<c;b++)d=e[b],""!==(g=this[d])&&f.push(d+"="+g);return window.open(this.url,this.name,f.join(","))},a}(),this.Maslosoft.AweShare.Adapters.Delicious=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return d(b,a),b.label="Save to Delicious",b.prototype.count=function(a){return $.getJSON("http://feeds.delicious.com/v2/json/urlinfo/data?url="+this.url+"&callback=?",function(b){return function(b){var c;return c=b[0]?b[0].total_posts:0,a(c)}}()).fail(function(){return a(0)})},b.prototype.decorate=function(a){return a.url="http://delicious.com/save?url="+this.url+"&title="+a.title+"&note="+a.description,a.width=710,a.height=660},b}(this.Maslosoft.AweShare.Adapter),this.Maslosoft.AweShare.Adapters.Digg=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return d(b,a),b.label="Submit to Digg",b.prototype.count=function(a){return $.getJSON("http://services.digg.com/1.0/endpoint?method=story.getAll&link="+this.url+"&type=javascript&callback=?",function(b){return function(b){var c;return c=0,b.stories&&b.stories[0]&&b.stories[0].diggs&&(c=b.stories[0].diggs),a(c)}}()).fail(function(){return a(0)})},b.prototype.decorate=function(a){return a.url="http://digg.com/submit?url="+this.url,a.width=600,a.height=500},b}(this.Maslosoft.AweShare.Adapter),this.Maslosoft.AweShare.Adapters.Facebook=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return d(b,a),b.label="Share on Facebook",b.prototype.count=function(a){return $.getJSON("http://graph.facebook.com/?callback=?&ids="+this.url,function(b){return function(c){var d;return c[b.url]||(c[b.url]={}),d=c[b.url].shares||0,a(d)}}(this)).fail(function(){return a(0)})},b.prototype.decorate=function(a){return a.url="http://www.facebook.com/sharer.php?m2w&s=100&p[url]="+this.url+"&p[title]="+a.title+"&p[summary]="+a.description+"&p[images][0]="+this.image,a.width=550,a.height=359},b}(this.Maslosoft.AweShare.Adapter),this.Maslosoft.AweShare.Adapters.GooglePlus=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return d(b,a),b.label="Share on Google+",b.prototype.count=function(a){return window.services||(window.services={}),window.services.gplus||(window.services.gplus={}),window.services.gplus.cb=function(b){return function(b){return a(b)}}(),$.getScript("http://share.yandex.ru/gpp.xml?url="+this.url).fail(function(){return a(0)})},b.prototype.decorate=function(a){return a.url="https://plus.google.com/share?url="+this.url,a.width=490,a.height=460},b}(this.Maslosoft.AweShare.Adapter),this.Maslosoft.AweShare.Adapters.Linkedin=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return d(b,a),b.label="Share on Linkedin",b.prototype.count=function(a){return $.getJSON("http://www.linkedin.com/countserv/count/share?callback=?&url="+this.url,function(b){return function(b){var c;return c=b.count,a(c)}}()).fail(function(){return a(0)})},b.prototype.decorate=function(a){return a.url="http://www.linkedin.com/shareArticle?mini=true&url="+this.url+"&title="+a.title,a.width=600,a.height=600},b}(this.Maslosoft.AweShare.Adapter),this.Maslosoft.AweShare.Adapters.Odnoklassniki=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return d(b,a),b.label="Share on Odnoklassniki.ru",b.prototype.count=function(a){return $.getScript("http://www.odnoklassniki.ru/dk?st.cmd=extLike&ref="+this.url).fail(function(){return a(0)}),window.ODKL||(window.ODKL={}),window.ODKL.updateCount=function(b){return function(b,c){return a(c)}}()},b.prototype.decorate=function(a){return a.url="http://www.odnoklassniki.ru/dk?st.cmd=addShare&st._surl="+this.url+"&title="+a.title,a.width=600,a.height=500},b}(this.Maslosoft.AweShare.Adapter),this.Maslosoft.AweShare.Adapters.Pinterest=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return d(b,a),b.label="Pin It",b.prototype.count=function(a){return $.getJSON("http://api.pinterest.com/v1/urls/count.json?callback=?&url="+this.url,function(b){var c;return c=b.count,a(c)}).fail(function(){return a(0)})},b.prototype.decorate=function(a){return a.url="http://pinterest.com/pin/create/button/?url="+this.url+"&media="+this.image+"&description="+a.title,a.width=770,a.height=760},b}(this.Maslosoft.AweShare.Adapter),this.Maslosoft.AweShare.Adapters.Reddit=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return d(b,a),b.label="Share on Reddit",b.prototype.decorate=function(a){return a.url="http://reddit.com/submit?url="+this.url+"&title="+a.title,a.width=600,a.height=500},b}(this.Maslosoft.AweShare.Adapter),this.Maslosoft.AweShare.Adapters.Tumblr=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return d(b,a),b.label="Share on Tumblr",b.prototype.decorate=function(a){return a.url="http://www.tumblr.com/share?v=3&u="+this.url+"&t="+a.title+"&s="+a.description,a.width=600,a.height=500},b}(this.Maslosoft.AweShare.Adapter),this.Maslosoft.AweShare.Adapters.Twitter=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return d(b,a),b.label="Tweet It",b.prototype.count=function(a){return $.getJSON("http://urls.api.twitter.com/1/urls/count.json?&url="+this.url+"&callback=?",function(b){var c;return c=b.count,a(c)}).fail(function(){return a(0)})},b.prototype.decorate=function(a){var b;return b=encodeURIComponent(a.title),a.url="https://twitter.com/intent/tweet?text="+b+"&url="+this.url,this.data.tags.length&&(a.url=a.url+"&hashtags="+this.data.tags.join(",")),a.width=480,a.height=280},b}(this.Maslosoft.AweShare.Adapter),this.Maslosoft.AweShare.Adapters.Vk=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return d(b,a),b.label="Share on VK",b.prototype.count=function(a){return $.getScript("http://vk.com/share.php?act=count&index=&url="+this.url).fail(function(){return a(0)}),window.VK||(window.VK={}),window.VK.Share={count:function(b){return function(b,c){return a(c)}}()}},b.prototype.decorate=function(a){return a.url="http://vk.com/share.php?url="+this.url+"&title="+a.title+"&image="+this.image+"&description="+a.description,a.width=655,a.height=429},b}(this.Maslosoft.AweShare.Adapter),jQuery(document).ready(function(){return Maslosoft.AweShare.init()})}).call(this);