(function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c=function(a,b){function c(){this.constructor=a}for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},d={}.hasOwnProperty;this.Maslosoft||(this.Maslosoft={}),this.Maslosoft.AweShare=function(){function a(c){this.share=b(this.share,this);var d,e,f,g,h,i,j,k,l;if(this.adapters={},this.windows={},this.element={},a.idCounter++,this.element=jQuery(c),this.element.attr("id")||this.element.attr("id","maslosoft-awe-share-"+a.idCounter),f=this.element.data(),h=new Maslosoft.AweShare.Meta,f.services?f.services=f.services.replace(/\s*/g,"").split(","):f.services=[],f.url||(f.url=document.location),f.title||(f.title=document.title),f.description||(f.description=h.getName("description")),f.image||(f.image=h.getProperty("og:image")),void 0===f.counter?f.counter=!0:f.counter=!!JSON.parse(f.counter),console.log(!!f.counter),!f.services.length){j=Maslosoft.AweShare.Adapters;for(i in j)d=j[i],f.services.push(this.decamelize(i))}this.adapters={},k=f.services;for(g in k)i=k[g],e=this.camelize(i),"function"==typeof Maslosoft.AweShare.Adapters[e]?(d=new Maslosoft.AweShare.Adapters[e],d.setUrl(f.url),l=new Maslosoft.AweShare.Window(f),d.decorate(l),this.adapters[i]=d,this.windows[i]=l):(console.warn("No adapter for "+i+" in ",c,(new Error).stack),f.services.splice(g,1));0===this.adapters.length&&console.warn("No adapters selected for ",c,(new Error).stack),this.element.on("click","a",this.share),new Maslosoft.AweShare.Renderer(this,f,this.adapters)}return a.idCounter=0,a.prototype.element="",a.prototype.adapters={},a.prototype.windows={},a.prototype.share=function(a){var b,c,d,e;return c=jQuery(a.currentTarget).data(),d=c.service,b=this.adapters[d],e=this.windows[d],e.open(),a.preventDefault()},a.prototype.decamelize=function(a,b){return null==b&&(b="-"),a.replace(/([a-z\d])([A-Z])/g,"$1"+b+"$2").replace(new RegExp("("+b+"[A-Z])([A-Z])","g"),"$1"+b+"$2").toLowerCase()},a.prototype.camelize=function(a){return a.replace(/(?:^|[-_])(\w)/g,function(a,b){return b?b.toUpperCase():""})},a.init=function(){return jQuery(".awe-share").each(function(a,b){return new window.Maslosoft.AweShare(b)})},a}(),this.Maslosoft.AweShare.Adapters={},this.Maslosoft.AweShare.Adapter=function(){function a(){}return a.prototype.id=null,a.prototype.url="",a.prototype.image="",a.prototype.count=function(a){return a(0)},a.prototype.decorate=function(a){return a.url="#not implemented"},a.prototype.setId=function(a){this.id=a},a.prototype.getId=function(){return this.id},a.prototype.setImage=function(a){this.image=a},a.prototype.setUrl=function(a){return a=a.toString(),a.indexOf("#")?this.url=a.split("#")[0]:this.url=a},a}(),a={},this.Maslosoft.AweShare.Counter=function(){function c(a,c,d){this.name=a,this.setCount=b(this.setCount,this),this.count=b(this.count,this),this.adapter={},this.callback={},this.adapter=c,this.callback=d}return c.prototype.adapter={},c.prototype.name="",c.prototype.callback={},c.prototype.count=function(){return a[this.name]&&"number"==typeof a[this.name][this.adapter.url]?this.callback(this.name,a[this.name][this.adapter.url]):(a[this.name]||(a[this.name]={}),a[this.name][this.adapter.url]=0,this.adapter.count(this.setCount))},c.prototype.setCount=function(b){return a[this.name][this.adapter.url]=parseInt(b),this.callback(this.name,parseInt(b))},c}(),this.Maslosoft.AweShare.Meta=function(){function a(){}return a.prototype.getName=function(a){return this.get("name",a)},a.prototype.getProperty=function(a){return this.get("property",a)},a.prototype.get=function(a,b){var c,d,e,f,g;for(g=document.getElementsByTagName("meta"),d=0,e=g.length;e>d;d++)if(f=g[d],c=null,f&&(c=f.getAttribute(a)),c&&c.toLowerCase()===b.toLowerCase())return f.getAttribute("content");return""},a}(),this.Maslosoft.AweShare.Renderer=function(){function a(a,c,d){this.setCounter=b(this.setCounter,this);var e,f,g;this.sharer={},this.adapters={},this.data={},this.sharer=a,this.data=c,this.adapters=d,g=this.adapters;for(f in g)e=g[f],this.render(f,e)}return a.prototype.sharer={},a.prototype.data={},a.prototype.adapters={},a.prototype.render=function(a,b){var c,d,e;return e=this.sharer.windows[a],d=jQuery('<a href="'+e.url+'" data-service="'+a+'" class="awe-share-brand-'+a+'" title="'+b.label+"\">\n	<i class='fa fa-2x fa-"+a+"'></i>\n</a>"),this.sharer.element.append(d),this.data.counter?(d.append('<span class="awe-share-counter">0</span>'),c=new Maslosoft.AweShare.Counter(a,b,this.setCounter),c.count()):void 0},a.prototype.humanize=function(a){var b,c,d;if(a=parseInt(a),b=1e3,Math.abs(a)<b)return a;for(d=["k","m","g"],c=-1;;)if(a/=b,++c,!(Math.abs(a)>=b&&c<d.length-1))break;return a.toFixed()+d[c]},a.prototype.setCounter=function(a,b){return b=this.humanize(b),this.sharer.element.find("a[data-service="+a+"]").find(".awe-share-counter").html(b)},a}(),this.Maslosoft.AweShare.Window=function(){function a(a){this.open=b(this.open,this),this.title=a.title,this.description=a.description}return a.prototype.name="_blank",a.prototype.menubar=0,a.prototype.resizable=1,a.prototype.scrollbars=0,a.prototype.status=0,a.prototype.toolbar=0,a.prototype.top="",a.prototype.left="",a.prototype.width="",a.prototype.height="",a.prototype.url="",a.prototype.title="",a.prototype.description="",a.prototype.open=function(){var a,b,c,d,e,f;for(""===this.width&&(this.width=Math.ceil(window.innerWidth/2)),""===this.height&&(this.height=Math.ceil(window.innerHeight/2)),""===this.top&&(this.top=Math.ceil(window.innerHeight/4)),""===this.left&&(this.left=Math.ceil(window.innerWidth/4)),e=[],d=["menubar","resizable","scrollbars","status","toolbar","top","left","width","height"],a=0,b=d.length;b>a;a++)c=d[a],f=this[c],""!==f&&e.push(c+"="+f);return window.open(this.url,this.name,e.join(","))},a}(),this.Maslosoft.AweShare.Adapters.Delicious=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.label="Save to Delicious",b.prototype.count=function(a){return $.getJSON("http://feeds.delicious.com/v2/json/urlinfo/data?url="+this.url+"&callback=?",function(b){return function(b){var c;return c=b[0]?b[0].total_posts:0,a(c)}}(this)).fail(function(){return a(0)})},b.prototype.decorate=function(a){return a.url="http://delicious.com/save?url="+this.url+"&title="+a.title+"&note="+a.description},b}(this.Maslosoft.AweShare.Adapter),this.Maslosoft.AweShare.Adapters.Digg=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.label="Submit to Digg",b.prototype.count=function(a){return $.getJSON("http://services.digg.com/1.0/endpoint?method=story.getAll&link="+this.url+"&type=javascript&callback=?",function(b){return function(b){var c;return c=0,b.stories&&b.stories[0]&&b.stories[0].diggs&&(c=b.stories[0].diggs),a(c)}}(this)).fail(function(){return a(0)})},b.prototype.decorate=function(a){return a.url="http://digg.com/submit?url="+this.url},b}(this.Maslosoft.AweShare.Adapter),this.Maslosoft.AweShare.Adapters.Facebook=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.label="Share on Facebook",b.prototype.count=function(a){return $.getJSON("http://graph.facebook.com/?callback=?&ids="+this.url,function(b){return function(c){var d;return c[b.url]||(c[b.url]={}),d=c[b.url].shares||0,a(d)}}(this)).fail(function(){return a(0)})},b.prototype.decorate=function(a){return a.url="http://www.facebook.com/sharer.php?m2w&s=100&p[url]="+this.url+"&p[title]="+a.title+"&p[summary]="+a.description+"&p[images][0]="+this.image},b}(this.Maslosoft.AweShare.Adapter),this.Maslosoft.AweShare.Adapters.GooglePlus=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.label="Share on Google+",b.prototype.count=function(a){return window.services||(window.services={}),window.services.gplus||(window.services.gplus={}),window.services.gplus.cb=function(b){return function(b){return a(b)}}(this),$.getScript("http://share.yandex.ru/gpp.xml?url="+this.url).fail(function(){return a(0)})},b.prototype.decorate=function(a){return a.url="https://plus.google.com/share?url="+this.url},b}(this.Maslosoft.AweShare.Adapter),this.Maslosoft.AweShare.Adapters.Linkedin=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.label="Share on Linkedin",b.prototype.count=function(a){return $.getJSON("http://www.linkedin.com/countserv/count/share?callback=?&url="+this.url,function(b){return function(b){var c;return c=b.count,a(c)}}(this)).fail(function(){return a(0)})},b.prototype.decorate=function(a){return a.url="http://www.linkedin.com/shareArticle?mini=true&url="+this.url+"&title="+a.title},b}(this.Maslosoft.AweShare.Adapter),this.Maslosoft.AweShare.Adapters.Odnoklassniki=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.label="Share on Odnoklassniki.ru",b.prototype.count=function(a){return $.getScript("http://www.odnoklassniki.ru/dk?st.cmd=extLike&ref="+this.url).fail(function(){return a(0)}),window.ODKL||(window.ODKL={}),window.ODKL.updateCount=function(b){return function(b,c){return a(c)}}(this)},b.prototype.decorate=function(a){return a.url="http://www.odnoklassniki.ru/dk?st.cmd=addShare&st._surl="+this.url+"&title="+a.title},b}(this.Maslosoft.AweShare.Adapter),this.Maslosoft.AweShare.Adapters.Pinterest=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.label="Pin It",b.prototype.count=function(a){return $.getJSON("http://api.pinterest.com/v1/urls/count.json?callback=?&url="+this.url,function(b){var c;return c=b.count,a(c)}).fail(function(){return a(0)})},b.prototype.decorate=function(a){return a.url="http://pinterest.com/pin/create/button/?url="+this.url+"&media="+this.image+"&description="+a.title},b}(this.Maslosoft.AweShare.Adapter),this.Maslosoft.AweShare.Adapters.Reddit=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.label="Share on Reddit",b.prototype.decorate=function(a){return a.url="http://reddit.com/submit?url="+this.url+"&title="+a.title},b}(this.Maslosoft.AweShare.Adapter),this.Maslosoft.AweShare.Adapters.Tumblr=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.label="Share on Tumblr",b.prototype.decorate=function(a){return a.url="http://www.tumblr.com/share?v=3&u="+this.url+"&t="+a.title+"&s="+a.description},b}(this.Maslosoft.AweShare.Adapter),this.Maslosoft.AweShare.Adapters.Twitter=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.label="Tweet It",b.prototype.count=function(a){return $.getJSON("http://urls.api.twitter.com/1/urls/count.json?&url="+this.url+"&callback=?",function(b){var c;return c=b.count,a(c)}).fail(function(){return a(0)})},b.prototype.decorate=function(a){return a.url="https://twitter.com/intent/tweet?text="+a.title+"&url="+this.url},b}(this.Maslosoft.AweShare.Adapter),this.Maslosoft.AweShare.Adapters.Vk=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.label="Share on VK",b.prototype.count=function(a){return $.getScript("http://vk.com/share.php?act=count&index=&url="+this.url).fail(function(){return a(0)}),window.VK||(window.VK={}),window.VK.Share={count:function(b){return function(b,c){return a(c)}}(this)}},b.prototype.decorate=function(a){return a.url="http://vk.com/share.php?url="+this.url+"&title="+a.title+"&image="+this.image+"&description="+a.description},b}(this.Maslosoft.AweShare.Adapter),jQuery(document).ready(function(){return Maslosoft.AweShare.init()})}).call(this);